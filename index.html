<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Display from CSV</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }
    #imageContainer {
        margin-top: 20px;
    }
    img {
        max-width: 100%;
    }
</style>
</head>
<body>
    <h1>Display Image from CSV</h1>
    <div id="imageContainer">
        <h2>Rendered Image</h2>
        <img id="renderedImage" alt="Rendered Image">
    </div>

    <script>
        function fetchAndRenderImage() {
            var urlParams = new URLSearchParams(window.location.search);
            var imgName = urlParams.get('img');
            var id = urlParams.get('id');
            if (imgName && id) {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', `https://html.cafe/${id}`, true);
                xhr.onload = function() {
                    if (xhr.status === 200) {
                        var lines = xhr.responseText.split('\n');
                        for (var i = 1; i < lines.length; i++) {
                            var cells = lines[i].split(',');
                            if (cells[0] === imgName) {
                                renderImage(cells[1]);
                                break;
                            }
                        }
                    }
                };
                xhr.send();
            }
        }

        function renderImage(base64String) {
            var image = document.getElementById('renderedImage');
            image.src = base64String;
        }

        window.onload = fetchAndRenderImage;
    </script>
</body>
</html>
